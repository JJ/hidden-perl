<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Perl, the hidden gem</title>

		<link rel="stylesheet" href="dist/reset.css">
                <link rel="stylesheet" href="dist/extra.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/hidden-perl.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
	</head>
	<body>
	  <div class="reveal">
	    <div class="slides">
	      <section data-background='https://live.staticflickr.com/619/20996949839_9be1423b2c_k_d.jpg'>
                <h1>Perl, the hidden automation gem</h1>
                <h2>On how Perl can be used in almost every CI/CD
		  environment, and you probably didn't know</h2>
                <h3><code> <a href='https://twitter.com/jjmerelo'>@jjmerelo</code> ⋄
		<code><a
		href='https://github.com/JJ'>github.com/JJ</code> ⋄
		  <code><a
		href='https://metacpan.org/author/JMERELO'>CPAN:
		    JMERELO</a></code>
                  <aside class='notes'>CPAN being the Comprehensive
                    Perl Archive Network</aside>
              </section>

	      <section data-background='https://live.staticflickr.com/3507/3791689000_76e3a5ef16_k_d.jpg'
                       ><h1>Programming Perl since 1993</h1>
                <h2>Lately more Raku (formerly known as Perl 6)</h2>
                <aside class='notes'>Picture taken in 2009, Perl
                  conference in Lisbon</aside>
              </section>

              <section
                data-background='https://live.staticflickr.com/3/4245013_f1aa6d898f_k_d.jpg'><h1>Wait. Perl?</h1>
                <h1 class='fragment'>What is that?</h1>
              </section>

              <section><h1>You know, Perl!</h1>
                <h2 class='fragment'>From the Internet...</h2>
                <pre><code># from your .git/hooks/prepare-commit-message.sample

COMMIT_MSG_FILE=$1

/usr/bin/perl -i.bak -ne 'print unless(m/^. Please enter the commit message/..m/^#$/)' "$COMMIT_MSG_FILE"
                </code></pre>

                <aside class='notes'>You have probably lots of copies
            of this snippet of code in your hard dist, because it's
                  included with every default git installation. It
            exemplifies the expressivity, handling of regular
            expressions, and integration with system tools that is
                  exclusive to Perl</aside>
              </section>

              <section><h1>Let's break it down</h1>
                <pre><code data-line-numbers='1|3|4|5|6|7|8|9|3'>COMMIT_MSG_FILE=$1 # Define environment variable from shell argument

/usr/bin/perl # Use system perl
  -i.bak      # Write the original file with .bak extension
  -ne         # Run the following script with while (<>) {} wrapped
  'print
     unless( # Opposite of if
       m/^. Please enter the commit message/ .. m/^#$/) # Between two regexes
   ' "$COMMIT_MSG_FILE" # applies to the file above
                </code></pre>

                <aside class='notes'>I had to look that up... it's
              probably not the easiest, but one you can check
              yourself. There are several more examples in the same
              directory and even in the same file. Most important
              lesson is in line three, however. Git assumes that you
                  have a system perl installed. No examples in Python
              or Ruby.</aside>
              </section>

              <section><h1>6.4% of git is written in Perl</h1>
                <h2>From <a href='https://github.com/git/git/blob/3cf59784d42c4152a0b3de7bb7a75d0071e5f878/git-add--interactive.perl'><code>git/git-add--interactive.perl</code></a></h2>
                <pre><code data-line-numbers='1,6,8,11-13|6,8|10,14'>use Git qw(unquote_path);
use Git::I18N;

binmode(STDOUT, ":raw");

my $repo = Git->repository();

my $menu_use_color = $repo->get_colorbool('color.interactive');
my ($prompt_color, $header_color, $help_color) =
	$menu_use_color ? (
		$repo->get_color('color.interactive.prompt', 'bold blue'),
		$repo->get_color('color.interactive.header', 'bold'),
		$repo->get_color('color.interactive.help', 'red bold'),
	) : ();
                </code></pre>
                <aside class='notes'>We have a module (that is
                  included with git, so it's probably installed in
                  your system too, and that's used to work on the
                  repository you're in, the sigils that give it such a
                  bad name (but once you get to know them, they're OK,
                  scope declarations, ternary operator... It's a great
                  little language, I love it.</aside>
              </section>
            </div>
	  </div>

	  <script src="dist/reveal.js"></script>
	  <script src="plugin/notes/notes.js"></script>
	  <script src="plugin/markdown/markdown.js"></script>
	  <script src="plugin/highlight/highlight.js"></script>
	  <script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
			  hash: true,
                          width: '95%',
                          controls: true,
                          progress: true,
                          history: true,
                          autoPlayMedia: true,
				// Learn about plugins: https://revealjs.com/plugins/
			  plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
